@model BiblioContenidos_2.Models.ActualizarUsuario

@{
    ViewBag.Title = "Actualizar Datos de Usuario";
}

<h2>Actualizar Datos de Usuario</h2>
 
@using (@Html.BeginForm("Index", "ActualizarUsuario", FormMethod.Post, new { enctype = "multipart/form-data" }))
{ 
    @Html.ValidationSummary()
    <table>
        <tr><th>Campo</th><th>Valor Actual</th><th>Nuevo Valor</th></tr>
        <tr><td>Nick:</td><td>@User.Identity.Name</td><td></td></tr>
        <tr><td>E-Mail:</td><td> @ViewBag.ce </td><td></td></tr>
        <tr><td><label>Avatar:</label></td><td>@if(@ViewBag.usuario != null){ <img src="@Url.Action("MostrarFoto")" alt="" height="50" width="50" /> }</td><td><input type="file" name="file" id="file" accept="image/*"/></td></tr>
        <tr><td><label>Apellido Paterno: </label></td><td>@if(@ViewBag.usuario != null){ @ViewBag.usuario.ApPaterno }</td><td>@Html.TextBoxFor(a => a.ApPaterno)</td></tr>
        <tr><td><label>Apellido Materno: </label></td><td>@if(@ViewBag.usuario != null){ @ViewBag.usuario.ApMaterno }</td><td>@Html.TextBoxFor(a => a.ApMaterno)</td></tr>
        <tr><td><label>Nombres: </label></td><td>@if(@ViewBag.usuario != null){ @ViewBag.usuario.Nombres }</td><td>@Html.TextBoxFor(a => a.Nombres)</td></tr>
        <tr><td><label>Ubicación: </label></td><td>@if(@ViewBag.usuario != null){ @ViewBag.usuario.Ubicacion }</td><td>@Html.TextBoxFor(a => a.Ubicacion)</td></tr>
        <tr><td>Intereses:<td></td><td>@Html.TextBoxFor(a => a.Intereses)</td></tr>
        <tr><td>Karma:</td><td>@if(@ViewBag.usuario != null){ @ViewBag.usuario.Karma }</td></tr>
        <tr><td><input type="submit" value="Enviar"/></td><td>@Html.ActionLink("Reestablecer", "Index", "ActualizarUsuario")</td><td>@Html.ActionLink("Cerrar", "Index", "Home")</td></tr>
    </table>    
}

<h3>@Html.ActionLink("Resúmen de actividad", "Index", "ActualizarUsuario")</h3>
@if (@ViewBag.Resumen != null)
{
    <table>
        <tr><th>Fecha</th><th>Tipo de Publicación</th><th>Título</th><th>Estado</th><th>Puntos</th><th align="center">MeGusta</th></tr>
        @foreach (var item in @ViewBag.Resumen)
        { 
            <tr>
                <td>@item.FechaPublicacion</td><td>@item.Tipo</td><td>@item.Titulo</td><td>@item.Estado</td>
                <td>@if(@item.Estado=="Aceptado"){ 
                        @item.Puntos
                    }
                </td>
                <td align="center">@item.TotalMeGusta</td>
                <td>@Html.ActionLink("ReEditar","ReEdicion","Contenido", new { id = @item.IdContenido }, null)</td>
            </tr>
        }
        <tr><td></td><td></td><td></td><td></td><td>Total MeGusta: </td><td align="center">@ViewBag.TotalG</td></tr>
        </table>
}